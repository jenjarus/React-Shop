(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{5754:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/basket",function(){return n(5605)}])},3771:function(e,t,n){"use strict";function s(e){return{type:"SET_PRODUCT_TO_BASKET",item:e}}function i(e,t){return{type:"EDIT_PRODUCT_COUNT",id:e,qty:t}}function a(e){return{type:"DELETE_PRODUCT",id:e}}function r(){return{type:"RESET_PRODUCT"}}n.d(t,{Ir:function(){return a},gn:function(){return s},k:function(){return i},ms:function(){return r}})},423:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var s,i,a=n(5893),r=n(7294);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var l=function(e){return r.createElement("svg",c({width:100,height:100,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=r.createElement("path",{d:"M5 12h14"})))};function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var u=function(e){return r.createElement("svg",o({width:100,height:100,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=r.createElement("path",{d:"M12 5v14M5 12h14"})))};let d=e=>{let{setCount:t,customClass:n="",count:s=1}=e;n=n?" "+n:"";let i=()=>{t(e=>e+1)},r=()=>{s>1&&t(e=>e-1)},c=e=>{t(+e.target.value.trim())},o=e=>{/[0-9]/.test(e.key)||e.preventDefault()};return(0,a.jsxs)("div",{className:"input-qty"+n,children:[(0,a.jsx)("button",{className:"btn btn--transparent input-qty__minus",onClick:r,children:(0,a.jsx)(l,{})}),(0,a.jsx)("input",{type:"text",className:"input-qty__input",value:s,onKeyPress:o,onChange:c}),(0,a.jsx)("button",{className:"btn btn--transparent input-qty__plus",onClick:i,children:(0,a.jsx)(u,{})})]})};var m=d},5685:function(e,t,n){"use strict";var s=n(5893);let i=()=>(0,s.jsx)("div",{className:"loading",children:(0,s.jsx)("div",{className:"loading__image",children:(0,s.jsx)("img",{src:"https://i.gifer.com/VAyR.gif",alt:"loading"})})});t.Z=i},5605:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n(5893),i=n(7294),a=n(9473),r=n(1664),c=n.n(r),l=n(3771),o=n(423),u=n(3838);let d=e=>{let{data:t}=e,n=(0,a.I0)(),[r,d]=(0,i.useState)(t.qty),m=()=>{n((0,l.Ir)(t.id))};return(0,i.useEffect)(()=>{n((0,l.k)(t.id,r))},[r]),(0,s.jsx)("div",{className:"basket-item",children:(0,s.jsxs)("div",{className:"basket-item__wrapper",children:[(0,s.jsx)("div",{className:"basket-item__image",children:(0,s.jsx)(c(),{href:"/catalog/".concat(t.id),className:"basket-item__link",children:(0,s.jsx)("img",{src:t.image_url,alt:"img_catalog"})})}),(0,s.jsx)("div",{className:"basket-item__name",children:(0,s.jsx)(c(),{href:"/catalog/".concat(t.id),className:"basket-item__link",children:t.name})}),(0,s.jsxs)("div",{className:"basket-item__price",children:[t.price," $"]}),(0,s.jsx)(o.Z,{customClass:"basket-item__qty",count:r,setCount:d}),(0,s.jsxs)("div",{className:"basket-item__total",children:[t.price*r," $"]}),(0,s.jsx)("div",{className:"basket-item__delete",children:(0,s.jsx)("span",{className:"btn basket-item__delete-btn",onClick:m,children:(0,s.jsx)(u.Z,{})})})]})})};var m=n(5685),h=n(9008),p=n.n(h);let _=()=>{let e=(0,a.v9)(e=>e.basket.items),[t,n]=(0,i.useState)(!1),[r,l]=(0,i.useState)([]),o=e.reduce((e,t)=>e+t.price*t.qty,0),u=async e=>{n(!0),l([]);let t=await Promise.all(e.map(async e=>{try{let t="https://api.punkapi.com/v2/beers/".concat(e.id),n=await fetch(t),s=await n.json(),i={id:s[0].id,name:s[0].name,price:s[0].ibu,image_url:s[0].image_url,qty:e.qty};return i}catch(a){console.log(a)}}));l(t),n(!1)};return(0,i.useEffect)(()=>{u(e)},[e.length]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(p(),{children:[(0,s.jsx)("title",{children:"Корзина | Черное красное - магазин пива"}),(0,s.jsx)("meta",{name:"description",content:"Черное красное - магазин пива"}),(0,s.jsx)("link",{rel:"icon",href:"".concat("/React-Shop","/favicon.ico")})]}),(0,s.jsx)("h1",{className:"page-title",children:"Корзина"}),e.length?t?(0,s.jsx)(m.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"basket-items",children:r.map(e=>(0,s.jsx)(d,{data:e},e.id))}),(0,s.jsxs)("div",{className:"basket-total",children:["Всего: ",(0,s.jsxs)("span",{className:"basket-total__bold",children:[o," $"]})]}),(0,s.jsx)("div",{className:"basket-checkout",children:(0,s.jsx)(c(),{href:"/basket/checkout/",className:"btn basket-checkout__btn",children:"Перейти к оформлению"})})]}):(0,s.jsx)("p",{children:"Корзина пуста"})]})};var f=_},9008:function(e,t,n){e.exports=n(3121)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5754)}),_N_E=e.O()}]);