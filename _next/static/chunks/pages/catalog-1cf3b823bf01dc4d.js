(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{2718:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalog",function(){return n(8869)}])},3771:function(e,t,n){"use strict";function a(e){return{type:"SET_PRODUCT_TO_BASKET",item:e}}function i(e,t){return{type:"EDIT_PRODUCT_COUNT",id:e,qty:t}}function s(e){return{type:"DELETE_PRODUCT",id:e}}function r(){return{type:"RESET_PRODUCT"}}n.d(t,{Ir:function(){return s},gn:function(){return a},k:function(){return i},ms:function(){return r}})},7455:function(e,t,n){"use strict";function a(e){return{type:"SET_PRODUCT_TO_FAVORITE",id:e}}function i(e){return{type:"DELETE_PRODUCT_TO_FAVORITE",id:e}}n.d(t,{P:function(){return i},o:function(){return a}})},423:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var a,i,s=n(5893),r=n(7294);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var c=function(e){return r.createElement("svg",l({width:100,height:100,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=r.createElement("path",{d:"M5 12h14"})))};function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var d=function(e){return r.createElement("svg",o({width:100,height:100,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=r.createElement("path",{d:"M12 5v14M5 12h14"})))};let u=e=>{let{setCount:t,customClass:n="",count:a=1}=e;n=n?" "+n:"";let i=()=>{t(e=>e+1)},r=()=>{a>1&&t(e=>e-1)},l=e=>{t(+e.target.value.trim())},o=e=>{/[0-9]/.test(e.key)||e.preventDefault()};return(0,s.jsxs)("div",{className:"input-qty"+n,children:[(0,s.jsx)("button",{className:"btn btn--transparent input-qty__minus",onClick:r,children:(0,s.jsx)(c,{})}),(0,s.jsx)("input",{type:"text",className:"input-qty__input",value:a,onKeyPress:o,onChange:l}),(0,s.jsx)("button",{className:"btn btn--transparent input-qty__plus",onClick:i,children:(0,s.jsx)(d,{})})]})};var m=u},5685:function(e,t,n){"use strict";var a=n(5893);let i=()=>(0,a.jsx)("div",{className:"loading",children:(0,a.jsx)("div",{className:"loading__image",children:(0,a.jsx)("img",{src:"https://i.gifer.com/VAyR.gif",alt:"loading"})})});t.Z=i},2821:function(e,t,n){"use strict";var a=n(5893),i=n(7294),s=n(1664),r=n.n(s);n(5675);var l=n(9473),c=n(3771),o=n(7455),d=n(423),u=n(8175),m=n(2279);let h=e=>{let{data:t}=e,n=(0,l.I0)(),s=(0,l.v9)(e=>e.favorite.items),h=s.find(e=>e===t.id),[x,_]=(0,i.useState)(1),[p,f]=(0,i.useState)(!1),[g,j]=(0,i.useState)(!!h),v=()=>{1>=+x&&_(1);let e={id:t.id,name:t.name,price:t.ibu,qty:x};n((0,c.gn)(e)),f(!0)},b=()=>{h?(n((0,o.P)(t.id)),j(!1)):(n((0,o.o)(t.id)),j(!0))},N=()=>(0,a.jsxs)(u.Z,{title:"Товар добавлен в корзину",isOpen:p,closeModal:()=>f(!1),children:[(0,a.jsx)("div",{className:"modal-window__name-product",children:t.name}),(0,a.jsxs)("div",{className:"modal-window__buttons",children:[(0,a.jsx)(r(),{href:"/basket",className:"btn",children:"Перейти в корзину"}),(0,a.jsx)("button",{onClick:()=>f(!1),className:"btn btn--transparent",children:"Продолжить покупки"})]})]});return(0,i.useEffect)(()=>{j(!!h)},[h]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"catalog-item",children:(0,a.jsxs)("div",{className:"catalog-item__wrapper",children:[(0,a.jsx)("div",{className:"catalog-item__favorite"+(g?" active":""),children:(0,a.jsx)("span",{className:"btn catalog-item__favorite-btn",onClick:b,children:(0,a.jsx)(m.Z,{})})}),(0,a.jsxs)(r(),{href:"/catalog/".concat(t.id),className:"catalog-item__link",children:[(0,a.jsx)("div",{className:"catalog-item__image",children:(0,a.jsx)("img",{src:t.image_url,alt:"img_catalog"})}),(0,a.jsx)("div",{className:"catalog-item__name",children:t.name}),(0,a.jsxs)("div",{className:"catalog-item__price",children:[t.ibu," $"]})]}),(0,a.jsx)(d.Z,{count:x,setCount:_}),(0,a.jsx)("div",{className:"catalog-item__buy",children:(0,a.jsx)("span",{className:"btn catalog-item__buy-btn",onClick:v,children:"Купить"})})]})}),(0,a.jsx)(N,{})]})};t.Z=h},8869:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var a,i=n(5893),s=n(7294),r=n(9473);let l=e=>({type:"CHANGE_SORT",sortFlag:e}),c=(e,t)=>{let{target:{checked:n,value:a}}=e;return{type:"CHANGE_FILTER",filterCheck:n,filterValue:a,filterName:t}},o=()=>({type:"RESET_FILTER"}),d=e=>({type:"CHANGE_MIN_PRICE",minPrice:e}),u=e=>({type:"CHANGE_MAX_PRICE",maxPrice:e}),m=(e,t)=>({type:"INIT_PRICE_FILTER",minPriceInit:e,maxPriceInit:t});var h=n(2821),x=n(5685);function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var p=function(e){return s.createElement("svg",_({width:46,height:46,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=s.createElement("path",{d:"m6 9 6 6 6-6"})))};let f=[{flag:"nameASC",text:"От А до Я"},{flag:"nameDESC",text:"От Я до А"},{flag:"priceASC",text:"Сначала дешевые"},{flag:"priceDESC",text:"Сначала дорогие"}],g=()=>{let e=(0,r.I0)(),t=(0,r.v9)(e=>e.catalog.sortFlag),n=f.find(e=>e.flag===t).text,[a,c]=(0,s.useState)(!1),o=a?" open":"";return(0,i.jsx)("div",{className:"catalog-sorting",children:(0,i.jsxs)("div",{className:"catalog-sorting__select",children:[(0,i.jsx)("div",{className:"catalog-sorting__text",children:"Сортировать по"}),(0,i.jsxs)("div",{className:"select select--sorting"+o,children:[(0,i.jsxs)("div",{className:"select__text",onClick:()=>c(!a),children:[n,(0,i.jsx)("span",{className:"select__text-icon",children:(0,i.jsx)(p,{})})]}),(0,i.jsx)("ul",{className:"select__items",children:f.map(n=>{let a=n.flag===t?" selected":"";return(0,i.jsx)("li",{className:"select__item"+a,onClick(){e(l(n.flag)),c(!o)},children:n.text},n.flag)})})]})]})})},j=e=>{var t;let{num:n,data:a,nameFilter:s}=e,l=(0,r.I0)(),o=(0,r.v9)(e=>e.catalog.filters),d=(null===(t=o[s])||void 0===t?void 0:t.includes(a+""))?"checked":"",u=e=>{l(c(e,s))};return(0,i.jsxs)("div",{className:"form-checkbox",children:[(0,i.jsx)("input",{type:"checkbox",id:s+n,value:a,onChange:u,checked:d}),(0,i.jsx)("label",{htmlFor:s+n,children:a})]})},v=e=>{let{data:t,title:n,nameFilter:a,open:r=!1}=e,[l,c]=(0,s.useState)(r),o=t.map(e=>e[a]),d=o.filter((e,t)=>o.indexOf(e)===t);return d.sort((e,t)=>e-t),(0,i.jsxs)("div",{className:"filter filter-".concat(a)+(l?" open":""),children:[(0,i.jsxs)("div",{className:"filter__title",onClick:()=>c(!l),children:[n,":",(0,i.jsx)("span",{className:"filter__title-icon",children:(0,i.jsx)(p,{})})]}),(0,i.jsx)("div",{className:"filter__items",children:d.map((e,t)=>e?(0,i.jsx)(j,{num:t,data:e,nameFilter:a},t):"")})]})},b=()=>{let e=(0,r.I0)(),t=(0,r.v9)(e=>e.catalog.minPrice),n=(0,r.v9)(e=>e.catalog.maxPrice),[a,l]=(0,s.useState)(t),[c,o]=(0,s.useState)(n),[m,h]=(0,s.useState)(!0),x=t=>{let{target:n}=t,{value:a}=n;l(a),e(d(a))},_=t=>{let{target:n}=t,{value:a}=n;o(a),e(u(a))};return(0,s.useEffect)(()=>{l(t),o(n)},[t,n]),(0,i.jsxs)("div",{className:"filter filter-price"+(m?" open":""),children:[(0,i.jsxs)("div",{className:"filter__title",onClick:()=>h(!m),children:["Цена:",(0,i.jsx)("span",{className:"filter__title-icon",children:(0,i.jsx)(p,{})})]}),(0,i.jsxs)("div",{className:"filter__items filter__items--price",children:[(0,i.jsx)("span",{className:"filter__items-text",children:"от"}),(0,i.jsx)("div",{className:"form-input",children:(0,i.jsx)("input",{type:"number",value:a,onChange:x})}),(0,i.jsx)("span",{className:"filter__items-text",children:"до"}),(0,i.jsx)("div",{className:"form-input",children:(0,i.jsx)("input",{type:"number",value:c,onChange:_})})]})]})},N=e=>{let{data:t,openSidebar:n,setOpenSidebar:a}=e,s=(0,r.I0)(),l=n?" open":"";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"catalog-sidebar"+l,children:[(0,i.jsx)("div",{className:"catalog-sidebar__title",children:"Фильтр"}),(0,i.jsx)(b,{}),(0,i.jsx)(v,{data:t,title:"ABV",nameFilter:"abv",open:!0}),(0,i.jsx)(v,{data:t,title:"EBC",nameFilter:"ebc"}),(0,i.jsx)(v,{data:t,title:"IBU",nameFilter:"ibu"}),(0,i.jsx)("button",{className:"catalog-sidebar__reset btn",onClick(){s(o()),a(!1)},children:"Сбросить"})]}),(0,i.jsx)("div",{className:"catalog-sidebar__bg"+l,onClick:()=>a(!1)})]})};var C=n(9008),E=n.n(C);let k=()=>{let e=(0,r.I0)(),[t,n]=(0,s.useState)(!0),[a,l]=(0,s.useState)([]),[c,o]=(0,s.useState)(!1),d=(0,r.v9)(e=>e.catalog.sortFlag),u=(0,r.v9)(e=>e.catalog.filters),_=(0,r.v9)(e=>e.catalog.minPrice),p=(0,r.v9)(e=>e.catalog.maxPrice),f=e=>{for(let t in e=e.filter(e=>e.ibu>=_&&e.ibu<=p),u)0!==Object.keys(u[t]).length&&(e=e.filter(e=>u[t].includes(e[t]+"")));return e},j=()=>{let e;let t=(e,t)=>{let n=e.name,a=t.name;return n>a?1:n<a?-1:0},n=(e,t)=>{let n=e.name,a=t.name;return a>n?1:a<n?-1:0};switch(d){case"nameASC":default:e=t;break;case"nameDESC":e=n;break;case"priceASC":e=(e,t)=>e.ibu-t.ibu;break;case"priceDESC":e=(e,t)=>t.ibu-e.ibu}return e},v=async()=>{n(!0);try{let t=await fetch("https://api.punkapi.com/v2/beers?page=1&per_page=20"),a=await t.json();l(a);let i=a.map(e=>+e.ibu);e(m(Math.min(...i),Math.max(...i))),n(!1)}catch(s){console.log(s)}};return(0,s.useEffect)(()=>{v()},[a.length]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(E(),{children:[(0,i.jsx)("title",{children:"Каталог | Черное красное - магазин пива"}),(0,i.jsx)("meta",{name:"keywords",content:"Черное красное, магазин пива, магазин, пиво, Каталог, большой ассортимент, низкие цены"}),(0,i.jsx)("meta",{name:"description",content:"Черное красное - магазин пива"}),(0,i.jsx)("link",{rel:"icon",href:"".concat("/React-Shop","/favicon.ico")})]}),(0,i.jsx)("h1",{className:"page-title",children:"Каталог"}),(()=>{if(t)return(0,i.jsx)(x.Z,{});{let e=f(a),n=e.sort(j());return(0,i.jsxs)("div",{className:"catalog",children:[(0,i.jsx)(N,{data:a,openSidebar:c,setOpenSidebar:o}),(0,i.jsxs)("div",{className:"catalog-content",children:[(0,i.jsx)(g,{}),(0,i.jsx)("button",{className:"btn btn--filter__mobile",onClick:()=>o(!c),children:"Фильтр"}),(0,i.jsx)("div",{className:"catalog-items",children:n.length?n.map(e=>(0,i.jsx)(h.Z,{data:e},e.id)):(0,i.jsx)("p",{children:"Товаров не найдено"})})]})]})}})()]})};var y=k}},function(e){e.O(0,[959,774,888,179],function(){return e(e.s=2718)}),_N_E=e.O()}]);